
<!DOCTYPE html>
<html>
<head>
  <title>Maya - Profile</title>
  <style>
    body { background: #101010; color: white; font-family: sans-serif; padding: 20px; }
    .trade-table { border-top: 1px solid #444; padding-top: 10px; margin-top: 10px; }
    .inventory-item {
      background: #1c1c1c; padding: 10px; margin-bottom: 8px;
      border-radius: 8px; display: flex; justify-content: space-between;
    }
    button {
      background: #66f; color: white; border: none;
      padding: 4px 10px; border-radius: 5px; cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>Maya</h2>
  <p><strong>Role:</strong> Street Dealer</p>
  <p><strong>Mood:</strong> Adaptive</p>
  <p><strong>Currently on:</strong> <span id="drugIcon">ðŸ’Š</span> <span id="drugLabel">Adderall</span></p>

  <div class="trade-table">
    <h3>Inventory for Sale</h3>
    <div id="npcInventory"></div>
  </div>

  <p id="dealResult" style="margin-top:12px;color:#ffe600;"></p>

  <script>
    const npcId = "maya";
    const inventory = [
      { name: "LSD", icon: "ðŸ”®", qty: 2, price: 40 },
      { name: "Adderall", icon: "ðŸ’Š", qty: 3, price: 50 },
      { name: "Boost Kit", icon: "âœ¨", qty: 1, price: 60 },
      { name: "Seeds", icon: "ðŸŒ±", qty: 4, price: 20 },
      { name: "Weed Oil", icon: "ðŸ§´", qty: 2, price: 30 }
    ];

    function getStats() {
      return JSON.parse(localStorage.getItem("stats") || "{}");
    }

    function updateStats(stat, amount) {
      const stats = getStats();
      stats[stat] = (stats[stat] || 0) + amount;
      localStorage.setItem("stats", JSON.stringify(stats));
      localStorage.setItem("statsUpdated", Date.now());
    }

    function addToInventory(item) {
      const inv = JSON.parse(localStorage.getItem("inventory") || "[]");
      inv.push({ name: item.name, icon: item.icon, desc: "Bought from Maya" });
      localStorage.setItem("inventory", JSON.stringify(inv));
    }

    function buyItem(index) {
      const item = inventory[index];
      const stats = getStats();
      if ((stats.cash || 0) < item.price) {
        document.getElementById("dealResult").textContent = "Not enough cash!";
        return;
      }
      inventory[index].qty -= 1;
      updateStats("cash", -item.price);
      addToInventory(item);
      document.getElementById("dealResult").textContent = `Bought ${item.icon} ${item.name} for $${item.price}`;
      renderInventory();
    }

    function renderInventory() {
      const container = document.getElementById("npcInventory");
      container.innerHTML = "";
      inventory.forEach((item, i) => {
        if (item.qty > 0) {
          container.innerHTML += `
            <div class="inventory-item">
              <div>${item.icon} <strong>${item.name}</strong> (x${item.qty}) - $${item.price}</div>
              <button onclick="buyItem(${i})">Buy</button>
            </div>
          `;
        }
      });
    }

    document.addEventListener("DOMContentLoaded", renderInventory);
  </script>
</body>
</html>
