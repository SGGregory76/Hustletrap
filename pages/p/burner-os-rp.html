
<!-- Burner OS with RP Integration -->

<div class="phone-ui" id="mainPhone">
  <div class="phone-header">Corner Hustle</div>
  <div class="app-grid" id="appGrid">
    <div class="app-icon" onclick="loadPage('https://hustletrap.blogspot.com/p/missions.html?m=1')"><span class="icon">ğŸ“‹</span><span class="label">Missions</span></div>
    <div class="app-icon" onclick="loadPage('https://hustletrap.blogspot.com/p/contacts.html?m=1')"><span class="icon">ğŸ‘¥</span><span class="label">Contacts</span></div>
    <div class="app-icon" onclick="loadPage('https://hustletrap.blogspot.com/p/inventory.html?m=1')"><span class="icon">ğŸ’</span><span class="label">Inventory</span></div>
    <div class="app-icon" onclick="loadPage('https://hustletrap.blogspot.com/p/map.html?m=1')"><span class="icon">ğŸ—ºï¸</span><span class="label">Map</span></div>
    <div class="app-icon" onclick="loadPage('https://hustletrap.blogspot.com/p/log.html?m=1')"><span class="icon">ğŸ§¾</span><span class="label">Log</span></div>
    <div class="app-icon" onclick="loadPage('https://hustletrap.blogspot.com/p/settings.html?m=1')"><span class="icon">âš™ï¸</span><span class="label">Settings</span></div>
  </div>
  <div class="player-stats" id="playerStats">Loading stats...</div>
  <iframe id="appFrame" style="width:100%;height:320px;border:none;background:#0a0a0a;"></iframe>
</div>

<script>
if (window !== window.top && window.location.href.includes("burner-os")) {
  document.body.innerHTML = "<div style='color:#f44;text-align:center;padding:40px;font-size:18px;'>Burner OS cannot run inside another Burner OS tab.</div>";
  throw new Error("Blocked nested Burner OS iframe.");
}

function getLevel(xp) {
  return Math.floor(xp / 10) + 1;
}

function getStats() {
  return JSON.parse(localStorage.getItem("stats")) || {
    xp: 0, rep: 0, cash: 0, heat: 0, rp: 0
  };
}

function renderPlayerStats() {
  const stats = getStats();
  const level = getLevel(stats.xp);
  document.getElementById("playerStats").innerHTML =
    `<strong>Level:</strong> ${level} | <strong>XP:</strong> ${stats.xp} | <strong>RP:</strong> ${stats.rp} | <strong>REP:</strong> ${stats.rep} | <strong>Heat:</strong> ${stats.heat} | <strong>Cash:</strong> $${stats.cash}`;
}

function loadPage(url) {
  document.getElementById("appFrame").src = url;
}

document.addEventListener("DOMContentLoaded", renderPlayerStats);

window.addEventListener("storage", (e) => {
  if (["statsUpdated", "gameReset"].includes(e.key)) renderPlayerStats();
});
</script>
