
<!-- Dynamic Contacts Page with Unlock Logic -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<div class="contacts-container">
  <h2 style="text-align:center; color:#fff;">Your Contacts</h2>
  <div id="contacts-grid" class="contacts-grid">
    <!-- Blaze always visible -->
    <div class="contact-card" data-npc="blaze">
      <i class="fas fa-fire contact-icon" style="color:#ff4500;"></i>
      <span>Blaze</span>
      <div class="bar-wrap">
        <div class="bar-label">Loyalty</div><div class="bar" id="loyalty-blaze"></div>
      </div>
      <small class="status-badge new">Intro Mission</small>
      <a href="/p/profile-blaze.html?m=1" class="contact-link">View Profile</a>
    </div>
  </div>
</div>

<style>
body {
  background: #000;
  font-family: 'Segoe UI', sans-serif;
}
.contacts-container {
  padding: 16px;
  max-width: 500px;
  margin: auto;
}
.contacts-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}
.contact-card {
  background: #111;
  color: #fff;
  text-align: center;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid #333;
  box-shadow: 0 0 6px rgba(255,255,255,0.05);
  position: relative;
}
.contact-icon {
  font-size: 30px;
  margin-bottom: 8px;
  transition: text-shadow 0.3s ease;
}
.contact-card:hover .contact-icon {
  text-shadow: 0 0 8px currentColor;
}
.contact-link {
  display: block;
  margin-top: 8px;
  font-size: 13px;
  color: #60a5fa;
}
.bar-wrap {
  margin: 6px 0;
}
.bar-label {
  font-size: 10px;
  color: #aaa;
}
.bar {
  height: 6px;
  background: #38bdf8;
  border-radius: 4px;
  margin-top: 2px;
  width: 0;
  transition: width 0.3s ease;
}
.status-badge {
  font-size: 10px;
  background: #333;
  color: #fff;
  border-radius: 6px;
  padding: 2px 6px;
  margin-top: 4px;
  display: inline-block;
}
.status-badge.new { background: #22c55e; }
.status-badge.locked { background: #ef4444; }
.status-badge.complete { background: #3b82f6; }
</style>

<script>
const npcData = [
  {
    name: "Maya",
    icon: "fa-user-nurse",
    color: "#e879f9",
    role: "Crafts & Synthetics",
    flag: "maya_intro",
    id: "maya",
    link: "/p/profile-maya.html?m=1"
  },
  {
    name: "Rico",
    icon: "fa-dumbbell",
    color: "#facc15",
    role: "Muscle & Distribution",
    flag: "rico_intro",
    id: "rico",
    link: "/p/profile-rico.html?m=1"
  },
  {
    name: "Skye",
    icon: "fa-cloud-sun",
    color: "#60a5fa",
    role: "Designer Highs",
    flag: "skye_intro",
    id: "skye",
    link: "/p/profile-skye.html?m=1"
  },
  {
    name: "Jax",
    icon: "fa-wrench",
    color: "#f87171",
    role: "Upgrades & Tech",
    flag: "jax_intro",
    id: "jax",
    link: "/p/profile-jax.html?m=1"
  },
  {
    name: "Diesel",
    icon: "fa-gas-pump",
    color: "#94a3b8",
    role: "Combustibles & Black Market",
    flag: "diesel_intro",
    id: "diesel",
    link: "/p/profile-diesel.html?m=1"
  }
];

function addUnlockedContacts() {
  const data = JSON.parse(localStorage.getItem("gameData") || "{}");
  const grid = document.getElementById("contacts-grid");
  npcData.forEach(npc => {
    if (data.flags && data.flags[npc.flag]) {
      const loyalty = (data.loyalty && data.loyalty[npc.id]) || 0;
      const div = document.createElement("div");
      div.className = "contact-card";
      div.innerHTML = `
        <i class="fas ${npc.icon} contact-icon" style="color:${npc.color};"></i>
        <span>${npc.name}</span>
        <div class="bar-wrap">
          <div class="bar-label">Loyalty</div><div class="bar" id="loyalty-${npc.id}" style="width:${Math.min(loyalty * 10, 100)}%;"></div>
        </div>
        <small class="status-badge complete">Available</small>
        <a href="${npc.link}" class="contact-link">View Profile</a>
      `;
      grid.appendChild(div);
    }
  });

  // Set Blaze loyalty bar
  const blazeLoyalty = (data.loyalty && data.loyalty.blaze) || 0;
  const blazeBar = document.getElementById("loyalty-blaze");
  if (blazeBar) blazeBar.style.width = Math.min(blazeLoyalty * 10, 100) + "%";
}

document.addEventListener("DOMContentLoaded", addUnlockedContacts);
</script>
