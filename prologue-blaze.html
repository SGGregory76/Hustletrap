<!-- Prologue: Blaze’s Initiation -->
<div id="mission-container" data-mission="blaze-initiation">
  <h2 id="mission-title"></h2>
  <div id="mission-desc"></div>
  <div id="mission-options"></div>
  <div id="mission-outcome"></div>
</div>

<style>
  /* Container */
  #mission-container {
    margin:16px auto;
    padding:16px;
    background:#111;
    border:2px solid #444;
    border-radius:8px;
    max-width:500px;
    font-family:Roboto,sans-serif;
    color:#fff;
    box-sizing:border-box;
  }
  /* Title with icon */
  #mission-title {
    position:relative;
    background:rgba(0,0,0,0.8);
    padding:0.75em 1em 0.75em 3.5em;
    border-radius:4px;
    font-size:1.4rem;
    text-shadow:1px 1px 2px rgba(0,0,0,0.8);
    margin-bottom:12px;
  }
  #mission-title::before {
    content:"";
    position:absolute;
    left:1em; top:50%;
    width:24px; height:24px;
    transform:translateY(-50%);
    background:url('https://yourcdn.com/icons/phone.svg') center/contain no-repeat;
  }
  /* Description & outcome */
  #mission-desc, #mission-outcome {
    margin-bottom:12px;
    line-height:1.5;
    background:rgba(0,0,0,0.6);
    padding:0.5em;
    border-radius:4px;
  }
  #mission-outcome.info { background:#0066cc!important; }
  #mission-outcome.success { background:#0b3!important; }
  #mission-outcome.failure { background:#a00!important; }
  /* Buttons */
  #mission-options {
    display:flex;
    flex-direction:column;
    gap:8px;
  }
  #mission-options button {
    background:#222;
    border:2px solid #555;
    border-radius:6px;
    padding:0.75em;
    font-size:1rem;
    color:#fff;
    text-shadow:0 1px 2px rgba(0,0,0,0.8);
    cursor:pointer;
    transition:background .2s, border-color .2s;
    display:flex;
    align-items:center;
    gap:0.5em;
  }
  #mission-options button:hover { background:#333; border-color:#777; }
  #mission-options button:disabled { opacity:0.6; cursor:default; }
  /* Emoji icons for choices */
  .choice-icon {
    font-size:1.5rem;
    line-height:1;
  }
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  HT.missions.register('blaze-initiation', {
    run() {
      const c = document.getElementById('mission-container');
      const title = c.querySelector('#mission-title');
      const desc = c.querySelector('#mission-desc');
      const opts = c.querySelector('#mission-options');
      const out = c.querySelector('#mission-outcome');
      let xp=0, rep=0, rp=0, heat=0, cash=0;

      title.innerText = "Prologue: Blaze’s Initiation";
      desc.innerHTML = `
        <p>You wake on a curb under neon haze. Blaze, legend of the grid, slides you a patched phone.</p>
        <p>"No wrong answers, just consequences. Let’s see what you’re worth."</p>
      `;
      opts.innerHTML = "";
      out.innerText = "";

      const questions = [
        {
          prompt: "What’s your vice?",
          choices: [
            { icon:"🔥", text:"Chaos over calm", dx:{xp:10,rp:2} },
            { icon:"💼", text:"Business first",   dx:{rep:5,cash:5} },
            { icon:"🌪️", text:"Chase the thrill", dx:{rp:8,heat:3} }
          ]
        },
        {
          prompt: "First deal: speed or stealth?",
          choices: [
            { icon:"💨", text:"Full throttle", dx:{rp:10,heat:5} },
            { icon:"🌑", text:"Through shadows", dx:{rep:5,xp:3} },
            { icon:"⚖️", text:"Depends on job", dx:{xp:3,rep:3,rp:3} }
          ]
        },
        {
          prompt: "Street cred or zero heat?",
          choices: [
            { icon:"🏆", text:"Cred’s king",    dx:{rep:5,heat:5} },
            { icon:"☂️", text:"Stay clean",      dx:{cash:5,xp:2} },
            { icon:"☯️", text:"Balance is all",  dx:{xp:4,rep:4,cash:4} }
          ]
        }
      ];

      function ask(i) {
        if (i>=questions.length) return finish();
        const q = questions[i];
        desc.innerHTML = `<p>${q.prompt}</p>`;
        opts.innerHTML = "";
        out.innerText = "";
        q.choices.forEach(ch => {
          const btn = document.createElement('button');
          btn.innerHTML = `<span class="choice-icon">${ch.icon}</span>${ch.text}`;
          btn.onclick = () => {
            xp += ch.dx.xp||0;
            rep+= ch.dx.rep||0;
            rp += ch.dx.rp||0;
            heat+=ch.dx.heat||0;
            cash+=ch.dx.cash||0;
            ask(i+1);
          };
          opts.appendChild(btn);
        });
      }

      function finish() {
        opts.querySelectorAll('button').forEach(b=>b.disabled=true);
        addContact('Blaze');
        HT.stats.update({ xp,rep,heat,cash });
        out.className = 'info';
        out.innerText = 
          `Your stats — XP:${xp} Rep:${rep} RP:${rp} Heat:${heat} Cash:${cash}`;
        setTimeout(()=>HT.missions.start('meet-jax'), 2000);
      }

      ask(0);
    }
  });
  HT.missions.start('blaze-initiation');
});
</script>
