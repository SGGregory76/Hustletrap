<!-- ====== PROLOGUE: Blaze’s Initiation (5 Q’s + Logging + Redirect) ====== -->
<div id="mission-container" data-mission="blaze-initiation" style="
  margin:16px auto;
  padding:16px;
  background:#111;
  border:2px solid #444;
  border-radius:8px;
  max-width:500px;
  font-family:Roboto,sans-serif;
  color:#fff;
  box-sizing:border-box;
">
  <h2 id="mission-title" style="
    position:relative;
    background:rgba(0,0,0,0.8);
    padding:0.75em 1em 0.75em 3.5em;
    border-radius:4px;
    font-size:1.4rem;
    text-shadow:1px 1px 2px rgba(0,0,0,0.8);
    margin-bottom:12px;
  ">Prologue: Blaze’s Initiation</h2>
  <div id="mission-desc" style="
    margin-bottom:12px;
    line-height:1.5;
    background:rgba(0,0,0,0.6);
    padding:0.5em;
    border-radius:4px;
  ">
    <p>You wake on a curb under neon haze. Blaze, the one-name legend, slides you a patched phone.</p>
    <p><em>"No wrong answers, just consequences. Let’s see what you’re worth."</em></p>
  </div>
  <div id="mission-options" style="
    display:flex;
    flex-direction:column;
    gap:8px;
    margin-bottom:12px;
  "></div>
  <div id="mission-outcome" style="
    line-height:1.5;
    background:rgba(0,0,0,0.6);
    padding:0.5em;
    border-radius:4px;
    color:#6cf;
  "></div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // storage keys
  const statsKey    = 'playerStats';
  const logKey      = 'eventLog';
  const contactsKey = 'contacts';

  // load or init
  let stats    = JSON.parse(localStorage.getItem(statsKey)    || '{"xp":0,"rep":0,"rp":0,"heat":0,"cash":0}');
  let logArr   = JSON.parse(localStorage.getItem(logKey)      || '[]');
  let contacts = JSON.parse(localStorage.getItem(contactsKey) || '[]');

  // seed Blaze if missing
  if (!contacts.includes('Blaze')) {
    contacts.unshift('Blaze');
    localStorage.setItem(contactsKey, JSON.stringify(contacts));
    logArr.push(`[${new Date().toLocaleTimeString()}] Contact seeded: Blaze`);
  }

  // persistors
  function saveStats()   { localStorage.setItem(statsKey, JSON.stringify(stats)); }
  function logEvent(msg) {
    logArr.push(`[${new Date().toLocaleTimeString()}] ${msg}`);
    localStorage.setItem(logKey, JSON.stringify(logArr));
    console.log('Log:', msg);
  }

  // questions array
  const questions = [
    {
      prompt: "What’s your vice?",
      choices: [
        { icon:"🔥", text:"Chaos over calm", dx:{xp:10,rp:2} },
        { icon:"💼", text:"Business first",   dx:{rep:5,cash:5} },
        { icon:"🌪️", text:"Chase the thrill", dx:{rp:8,heat:3} }
      ]
    },
    {
      prompt: "First deal: speed or stealth?",
      choices: [
        { icon:"💨", text:"Full throttle",   dx:{rp:10,heat:5} },
        { icon:"🌑", text:"Through shadows",  dx:{rep:5,xp:3} },
        { icon:"⚖️", text:"Depends on job",  dx:{xp:3,rep:3,rp:3} }
      ]
    },
    {
      prompt: "Street cred or zero heat?",
      choices: [
        { icon:"🏆", text:"Cred’s king",    dx:{rep:5,heat:5} },
        { icon:"☂️", text:"Stay clean",     dx:{cash:5,xp:2} },
        { icon:"☯️", text:"Balance is all", dx:{xp:4,rep:4,cash:4} }
      ]
    },
    {
      prompt: "Favorite late-night snack?",
      choices: [
        { icon:"🍕", text:"Greasy pizza",    dx:{rp:5,heat:2} },
        { icon:"🍫", text:"Chocolate bars",  dx:{xp:2,rp:2} },
        { icon:"🌮", text:"Tacos on the go", dx:{cash:3,rep:1} }
      ]
    },
    {
      prompt: "Your motto in one word?",
      choices: [
        { icon:"🚀", text:"Go!",            dx:{xp:5,rp:5} },
        { icon:"💀", text:"Fearless",       dx:{heat:5,rep:3} },
        { icon:"🧠", text:"Calculated",     dx:{rep:4,xp:2} }
      ]
    }
  ];

  const descEl  = document.getElementById('mission-desc');
  const optsEl  = document.getElementById('mission-options');
  const outEl   = document.getElementById('mission-outcome');

  // ask question i
  function ask(i) {
    const q = questions[i];
    descEl.innerHTML = `<p>${q.prompt}</p>`;
    optsEl.innerHTML = '';
    outEl.innerText = '';

    q.choices.forEach(ch => {
      const btn = document.createElement('button');
      btn.innerHTML = `<span style="font-size:1.5rem;line-height:1; margin-right:8px;">${ch.icon}</span>${ch.text}`;
      btn.style.cssText = `
        background:#222;color:#fff;border:2px solid #555;
        border-radius:6px;padding:0.75em;font-size:1rem;
        text-shadow:0 1px 2px rgba(0,0,0,0.8);cursor:pointer;
        transition:background .2s,border-color .2s;
      `;
      btn.onmouseover = () => btn.style.background = '#333';
      btn.onmouseout  = () => btn.style.background = '#222';
      btn.onclick = () => {
        // apply delta
        Object.entries(ch.dx).forEach(([k,v]) => stats[k] = (stats[k]||0) + v);
        saveStats();
        logEvent(`Q${i+1}: ${ch.text}`);
        if (i+1 < questions.length) ask(i+1);
        else finish();
      };
      optsEl.appendChild(btn);
    });
  }

  // finish sequence
  function finish() {
    // disable any
    optsEl.querySelectorAll('button').forEach(b=>b.disabled=true);
    logEvent('Prologue complete');

    outEl.className = 'info';
    outEl.innerHTML = `
      <p>Stats set — XP:${stats.xp} Rep:${stats.rep} RP:${stats.rp} Heat:${stats.heat} Cash:${stats.cash}</p>
      <p>Redirecting to Burner OS…</p>
      <p><a href="https://hustletrap.blogspot.com/p/burner-os.html?m=1" style="color:#0af;">Click here if not redirected</a></p>
    `;
    console.log('📲 Redirecting now…');
    setTimeout(()=> window.location.replace('https://hustletrap.blogspot.com/p/burner-os.html?m=1'), 1800);
  }

  // start
  ask(0);
});
</script>
