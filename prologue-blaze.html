<!-- Prologue: Blaze‚Äôs Initiation (Redirect Fix v2) -->
<div id="mission-container" data-mission="blaze-initiation">
  <h2 id="mission-title"></h2>
  <div id="mission-desc"></div>
  <div id="mission-options"></div>
  <div id="mission-outcome"></div>
</div>

<style>
  /* (same container & button CSS as before) */
  #mission-container {margin:16px auto;padding:16px;background:#111;border:2px solid #444;border-radius:8px;max-width:500px;font-family:Roboto,sans-serif;color:#fff;box-sizing:border-box;}
  #mission-title {position:relative;background:rgba(0,0,0,0.8);padding:0.75em 1em 0.75em 3.5em;border-radius:4px;font-size:1.4rem;text-shadow:1px 1px 2px rgba(0,0,0,0.8);margin-bottom:12px;}
  #mission-title::before {content:"";position:absolute;left:1em;top:50%;width:24px;height:24px;transform:translateY(-50%);background:url('https://yourcdn.com/icons/phone.svg') center/contain no-repeat;}
  #mission-desc, #mission-outcome {margin-bottom:12px;line-height:1.5;background:rgba(0,0,0,0.6);padding:0.5em;border-radius:4px;}
  #mission-outcome.info{background:#0066cc!important;} #mission-outcome.success{background:#0b3!important;} #mission-outcome.failure{background:#a00!important;}
  #mission-options{display:flex;flex-direction:column;gap:8px;}
  #mission-options button{background:#222;border:2px solid #555;border-radius:6px;padding:0.75em;font-size:1rem;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,0.8);cursor:pointer;transition:background .2s,border-color .2s;display:flex;align-items:center;gap:0.5em;}
  #mission-options button:hover{background:#333;border-color:#777;} #mission-options button:disabled{opacity:0.6;cursor:default;}
  .choice-icon{font-size:1.5rem;line-height:1;}
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  HT.missions.register('blaze-initiation', {
    run() {
      const container = document.getElementById('mission-container');
      const titleEl   = container.querySelector('#mission-title');
      const descEl    = container.querySelector('#mission-desc');
      const optsEl    = container.querySelector('#mission-options');
      const outEl     = container.querySelector('#mission-outcome');
      let xp=0, rep=0, rp=0, heat=0, cash=0;

      titleEl.innerText = "Prologue: Blaze‚Äôs Initiation";
      descEl.innerHTML = `
        <p>You wake on a curb under neon haze. Blaze, legend of the grid, slides you a patched phone.</p>
        <p>"No wrong answers, just consequences. Let‚Äôs see what you‚Äôre worth."</p>
      `;

      const questions = [
        { prompt:"What‚Äôs your vice?", choices:[
            {icon:"üî•",text:"Chaos over calm",dx:{xp:10,rp:2}},
            {icon:"üíº",text:"Business first",  dx:{rep:5,cash:5}},
            {icon:"üå™Ô∏è",text:"Chase the thrill",dx:{rp:8,heat:3}}
        ]},
        { prompt:"First deal: speed or stealth?", choices:[
            {icon:"üí®",text:"Full throttle",  dx:{rp:10,heat:5}},
            {icon:"üåë",text:"Through shadows", dx:{rep:5,xp:3}},
            {icon:"‚öñÔ∏è",text:"Depends on job", dx:{xp:3,rep:3,rp:3}}
        ]},
        { prompt:"Street cred or zero heat?", choices:[
            {icon:"üèÜ",text:"Cred‚Äôs king",    dx:{rep:5,heat:5}},
            {icon:"‚òÇÔ∏è",text:"Stay clean",     dx:{cash:5,xp:2}},
            {icon:"‚òØÔ∏è",text:"Balance is all", dx:{xp:4,rep:4,cash:4}}
        ]},
        { prompt:"Favorite late-night snack?", choices:[
            {icon:"üçï",text:"Greasy pizza",   dx:{rp:5,heat:2}},
            {icon:"üç´",text:"Chocolate bars", dx:{xp:2,rp:2}},
            {icon:"üåÆ",text:"Tacos on the go",dx:{cash:3,rep:1}}
        ]},
        { prompt:"Your motto in one word?", choices:[
            {icon:"üöÄ",text:"Go!",           dx:{xp:5,rp:5}},
            {icon:"üíÄ",text:"Fearless",      dx:{heat:5,rep:3}},
            {icon:"üß†",text:"Calculated",    dx:{rep:4,xp:2}}
        ]}
      ];

      function ask(i) {
        descEl.innerHTML = `<p>${questions[i].prompt}</p>`;
        optsEl.innerHTML = '';
        outEl.innerText = '';
        questions[i].choices.forEach(ch => {
          const btn = document.createElement('button');
          btn.innerHTML = `<span class="choice-icon">${ch.icon}</span>${ch.text}`;
          btn.onclick = () => {
            xp   += ch.dx.xp   || 0;
            rep  += ch.dx.rep  || 0;
            rp   += ch.dx.rp   || 0;
            heat += ch.dx.heat || 0;
            cash += ch.dx.cash || 0;
            logEvent(`Q${i+1}: ${ch.text}`);
            if (i+1 < questions.length) ask(i+1);
            else finish();
          };
          optsEl.appendChild(btn);
        });
      }

      function finish() {
        optsEl.querySelectorAll('button').forEach(b=>b.disabled=true);
        addContact('Blaze');
        HT.stats.update({xp,rep,heat,cash});
        logEvent('Prologue complete');
        outEl.className = 'info';
        outEl.innerHTML = `Stats ‚Äî XP:${xp} Rep:${rep} RP:${rp} Heat:${heat} Cash:${cash}<br>`;
        outEl.innerHTML += `<a id="go-os" style="color:#0af;text-decoration:underline;cursor:pointer;">Go to Burner OS ‚Üí</a>`;
        console.log('üì≤ Redirecting to Burner OS‚Ä¶');
        document.getElementById('go-os').onclick = () => location.href='https://hustletrap.blogspot.com/p/burner-os.html?m=1';
        setTimeout(() => location.href='https://hustletrap.blogspot.com/p/burner-os.html?m=1', 2000);
      }

      ask(0);
    }
  });
  HT.missions.start('blaze-initiation');
});
</script>
