<!-- 1) Stats HUD -->
<div id="stat-hud" style="background:#222;color:#fff;padding:12px;border-radius:6px;font-family:Roboto,sans-serif;margin-bottom:16px;">
  <span id="hud-xp">XP: 0</span> |
  <span id="hud-rep">Rep: 0</span> |
  <span id="hud-cash">Cash: $0</span> |
  <span id="hud-heat">Heat: 0</span>
</div>

<!-- 2) Inventory panel -->
<div id="inventory" style="background:#111;color:#fff;padding:12px;border-radius:6px;margin-bottom:16px;font-family:Roboto,sans-serif;">
  <h4>Inventory</h4>
  <ul id="inv-list" style="list-style:disc inside;"></ul>
</div>

<!-- 3) Event log panel -->
<div id="event-log" style="background:#111;color:#fff;padding:12px;border-radius:6px;margin-bottom:16px;font-family:Roboto,sans-serif;">
  <h4>Activity Log</h4>
  <ul id="log-list" style="list-style:none;padding:0;margin:0;"></ul>
</div>

<script>
(function(){
  // —— Persistence helpers ——
  let stats     = JSON.parse(localStorage.getItem('playerStats')   || '{"xp":0,"rep":0,"cash":0,"heat":0}');
  let inventory = JSON.parse(localStorage.getItem('inventory')     || '[]');
  let eventLog  = JSON.parse(localStorage.getItem('eventLog')      || '[]');

  function saveStats()     { localStorage.setItem('playerStats', JSON.stringify(stats)); }
  function saveInventory() { localStorage.setItem('inventory',   JSON.stringify(inventory)); }
  function saveLog()       { localStorage.setItem('eventLog',    JSON.stringify(eventLog)); }

  // —— Renderers ——
  function renderHUD() {
    document.getElementById('hud-xp').innerText   = `XP: ${stats.xp}`;
    document.getElementById('hud-rep').innerText  = `Rep: ${stats.rep}`;
    document.getElementById('hud-cash').innerText = `Cash: $${stats.cash}`;
    document.getElementById('hud-heat').innerText = `Heat: ${stats.heat}`;
  }
  function renderInventory() {
    const ul = document.getElementById('inv-list');
    ul.innerHTML = '';
    inventory.forEach(item => {
      const li = document.createElement('li');
      li.innerText = item;
      ul.appendChild(li);
    });
  }
  function renderLog() {
    const ul = document.getElementById('log-list');
    ul.innerHTML = '';
    eventLog.slice(-10).forEach(entry => {
      const li = document.createElement('li');
      li.innerText = entry;
      ul.appendChild(li);
    });
  }

  // —— Updaters ——
  function updateStats(delta) {
    if (delta.xp)   stats.xp   += delta.xp;
    if (delta.rep)  stats.rep  += delta.rep;
    if (delta.cash) stats.cash += delta.cash;
    if (delta.heat) stats.heat += delta.heat;
    saveStats();
    renderHUD();
    logEvent(`Stats updated: ${JSON.stringify(delta)}`);
  }
  function addItem(item) {
    inventory.push(item);
    saveInventory();
    renderInventory();
    logEvent(`Added to inventory: ${item}`);
  }
  function logEvent(msg) {
    const ts = new Date().toLocaleTimeString();
    eventLog.push(`[${ts}] ${msg}`);
    saveLog();
    renderLog();
  }

  // —— Initial render ——
  renderHUD();
  renderInventory();
  renderLog();

  // —— Expose globally if needed ——
  window.updateStats  = updateStats;
  window.addItem      = addItem;
  window.logEvent     = logEvent;
})();
</script>
