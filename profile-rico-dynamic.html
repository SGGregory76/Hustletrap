<!DOCTYPE html>
<html>
<head>
  <title>Rico - Profile</title>
  <style>
    body { background: #101010; color: white; font-family: 'Segoe UI', sans-serif; padding: 20px; }
    .npc-profile { background: #111; padding: 15px; border-radius: 12px; }
    .icon { font-size: 28px; margin-right: 6px; }
    .role-badge { background: #444; color: #00ffcc; padding: 2px 6px; border-radius: 6px; font-size: 12px; margin-left: 8px; }
    .status-box { background: #1a1a1a; padding: 10px; margin-top: 10px; border-radius: 8px; }
    .traits { margin: 10px 0; }
    .trait { background: #222; color: #ccc; padding: 4px 8px; border-radius: 6px; font-size: 12px; margin-right: 5px; display: inline-block; }
    .summary { margin-top: 10px; font-style: italic; }
    .trade-behavior { margin-top: 15px; }
    .mission-btn { background: #28a745; padding: 8px 12px; color: #fff; text-decoration: none; border-radius: 6px; font-weight: bold; display: inline-block; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="npc-profile">
    <h2><span class="icon">âš¡</span> Rico <span class="role-badge">Enforcer</span></h2>

    <div class="status-box">
      <p><strong>Mood:</strong> <span id="moodText">Loading...</span></p>
      <p><strong>On Drug:</strong> <span id="drugLabel">...</span> <span id="drugIcon">ðŸ’Š</span></p>
    </div>

    <div class="traits">
      <span class="trait">Aggressive</span>
      <span class="trait">Protective</span>
      <span class="trait">Unpredictable</span>
    </div>

    <p class="summary">
      Rico guards turf, shakes down rivals, and helps you keep control of street-level operations. He's powerful, but volatile under pressure.
    </p>

    <div class="trade-behavior" id="tradeBehavior">
      <h4>Trade Tendencies</h4>
      <ul></ul>
    </div>

    <a href="/p/rico-missions.html?m=1" class="mission-btn">View Missions</a>
  </div>

  <script>
    const npcId = "Rico";
    const drugData = {
      Xanax: { mood: "Detached", icon: "ðŸ’Š", trade: [
        "Sells: Backed down, guards more than trades.",
        "Buys: Nothing unless necessary.",
        "Mood: Disengaged from conflict."
      ]},
      Marijuana: { mood: "Chilled", icon: "ðŸŒ¿", trade: [
        "Sells: Homegrown, low-key strains.",
        "Buys: Snacks and wraps.",
        "Mood: Mellow and humorous."
      ]},
      Adderall: { mood: "Focused", icon: "âš¡", trade: [
        "Sells: Defense tools, deals fast.",
        "Buys: Tactical gear.",
        "Mood: Sharp and short-tempered."
      ]},
      LSD: { mood: "Erratic", icon: "ðŸŒˆ", trade: [
        "Sells: Chaos kits.",
        "Buys: Symbols and scripts.",
        "Mood: Highly unpredictable."
      ]}
    };

    function rollDrug() {
      const keys = Object.keys(drugData);
      const drug = keys[Math.floor(Math.random() * keys.length)];
      localStorage.setItem(`${npcId}_drug`, drug);
      localStorage.setItem(`${npcId}_lastUpdate`, Date.now());
    }

    function getBehavior() {
      const drug = localStorage.getItem(`${npcId}_drug`) || "Adderall";
      return { drug, ...drugData[drug] };
    }

    function updateProfile() {
      const { drug, mood, icon, trade } = getBehavior();
      document.getElementById("moodText").textContent = mood;
      document.getElementById("drugIcon").textContent = icon;
      document.getElementById("drugLabel").textContent = drug;
      document.querySelector("#tradeBehavior ul").innerHTML = trade.map(i => `<li>${i}</li>`).join("");
    }

    function refreshState() {
      const last = parseInt(localStorage.getItem(`${npcId}_lastUpdate`) || "0");
      const now = Date.now();
      if (now - last > 1000 * 60 * 4) rollDrug();
      updateProfile();
    }

    window.addEventListener("load", refreshState);
  </script>
</body>
</html>
